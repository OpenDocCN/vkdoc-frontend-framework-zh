# 一、jQuery 的压倒性魔力

多年来，业余和专业 web 开发人员都在使用 jQuery 来减轻将库或 web 应用推向市场的负担。从某种意义上说，jQuery 已经成为 web 开发不可或缺的一部分。即使在撰写本文时，jQuery 仍被绝大多数公共网站引用， [<sup>1</sup>](#Fn1) 远远超过其他任何库。

许多开发人员似乎认为 jQuery 是一个默认需求。普遍的想法是:如果你在开发一个库或者一个 web 应用，你必须依赖 jQuery。jQuery 被视为这个神奇的黑匣子，可以解决 web 开发的所有难题。这是一个易于理解的框架，甚至允许新手快速整理他们的想法。

专业人士也倾向于对 jQuery 投入很多。毕竟这是我们新手时候用的。很舒服。我们理解。我们信任它。这些年来，它为我们提供了良好的服务。您不必(过多)考虑 DOM、浏览器错误或跨浏览器行为。jQuery 为我们解决了所有这些问题。。。不是吗？

不可否认，jQuery 确实有点神奇。事实上，它允许几乎任何技能水平的开发人员创建有用的东西。但是代价是什么呢？只考虑通过玫瑰色的 jQuery 透镜来理解 web。如果遇到 jQuery 没有正确抽象的底层行为怎么办？遇到 jQuery 的 bug 怎么办？如果您只是不能(被允许)使用 jQuery 怎么办？这类似于一个城市居民被扔进了西伯利亚的苔原。在这种情况下，你会害怕，迷失方向，准备不足。

尽管违背自己的意愿被带到异国他乡的可能性很小，但未来没有 jQuery 的可能性要大得多。如果您没有很好地掌握 DOM、web API 和 JavaScript，您最终会感觉有点像一个冷漠而困惑的都市人，试图在西伯利亚广袤无垠的陌生环境中生存。

Beyond jQuery 的一个目标是揭开这个看似无处不在的前端库的神秘面纱。摆脱对 jQuery 的盲目依赖的好处将变得显而易见。在本书的结尾，鉴于你对浏览器 API 和 JavaScript 的新理解，你将有能力作为一名 web 开发人员进一步成长。

本章探究了开发人员依赖 jQuery 的原因，以及他们继续依赖 jQuery 的原因。您将会看到为什么完全依赖一个单一的库会在您的知识中产生缺口，并阻止您作为开发人员的发展。我将讨论为什么对 web 和 JavaScript 的片面理解对开发人员来说是一个潜在的危险困境。有了这些知识，你就能更好地理解更多地依靠自己对基本面的扎实理解的好处。

## 为什么我们一直在使用 jQuery？

在探索我们应该如何(以及为什么)考虑从我们的工具箱中移除 jQuery 之前，我们应该首先理解 jQuery 为什么会存在。为什么这么多年来无数的 web 开发人员依赖这个库？为什么它一直是网站和应用的核心组件？为什么它继续如此普遍？为什么我们一直在使用 jQuery？我们都有自己的理由，而且确实有许多理由。最重要的是，jQuery 已经被证明提供了一个低门槛的入口。换句话说，即使是业余或偶尔的开发人员也发现，它允许他们几乎没有阻力地实现一个概念或想法。

### 简单

假设您正在阅读这本书，那么您已经对 jQuery 有所了解。你可能已经在某个项目中使用过它，不管它有多大。因此，让我们来探究为什么这个库对于所有技能水平的开发人员来说都如此容易使用。

最重要的是，jQuery 的 API 是直观的。想给一个元素添加一个 CSS 类？就用`addClass()`的方法。需要发送帖子请求吗？就用`post()`的方法。隐藏一个元素就像将它作为参数传递给 jQuery 的`hide()`方法一样简单。

jQuery 的魅力在它极其简单的 API 中显而易见。它允许那些之前对浏览器或 JavaScript 知之甚少的人创建一些有趣且有用的东西。这对那些只涉足 web 开发的人来说非常有吸引力，甚至可以说是最合适的。反过来，jQuery 的简单性对于专业的 web 开发人员来说也是一个潜在的危险。如果你还不相信这是真的，我们将在后面更深入地探讨这个理论。

### 社区

关于堆栈溢出(在撰写本书时)，120 万个问题被标记为 JavaScript 问题，75 万个被标记为 jQuery 问题。jQuery 是栈溢出中第六受欢迎的标签。下一个最受欢迎的前端库是 AngularJS in a distant 21st place，它只有 20 万个标记问题。有趣的是，200，000 个问题被标记为 jQuery 而不是 JavaScript。在许多情况下，jQuery 并不被视为 JavaScript 库。事实上，它被视为 JavaScript 的替代品。一种无需处理底层语言或 API 就能解决浏览器问题的方法。虽然有些人可能不清楚 jQuery 与 JavaScript 的关系，但是 jQuery 并不缺少愿意并准备好为这个库提供建议的开发人员。在栈溢出的 750，000 个 jQuery 标记的问题中，550，000 个(74%)包含至少一个投票赞成的答案。

截至 2016 年年中，jQuery 仍然是公共网站中使用最多的 JavaScript 库。事实上，70%的公共网站都在某种程度上依赖于 jQuery。第二个最受欢迎的库是 Bootstrap，仅在 13%的公共网站中使用。有了这个令人印象深刻的市场份额，当然有相当一部分用户对这个主题有一些工作知识。

除了 Stack Overflow 上的 jQuery 标签和大量致力于为投资于该技术的人提供建议的不同论坛和网站之外，jQuery 的网站还有自己的活跃用户论坛。帮助是很容易找到的，你可能遇到的任何问题都可能已经得到解决并经过长时间的讨论。大型成熟社区的现实是依赖任何软件库的一个吸引人的理由。

### 习惯

针对 jQuery 初学者的大量示例、博客文章和论坛是那些 web 开发新手选择这个库来帮助他们的项目的原因之一。但是经验丰富的开发人员呢？为什么他们继续在项目中使用 jQuery？一个完美的、有经验的开发者曾经是一个业余爱好者。作为业余爱好者，他们很可能已经接受了 jQuery。现在，有了多个项目，jQuery 已经证明了自己。而且就算已经注意到了库中的一些瑕疵，也很好理解。

对于经验丰富的开发人员来说，jQuery 足够一致和可靠。它已经成为发展过程的一部分。一个强大的社区也是有经验的开发人员意识到的一个好处，这也是坚持使用这样一个值得信赖的工具的另一个原因。

jQuery 是我们编写任何东西的先决条件。我们无意识地引入它，部分是因为我们已经习惯性地接受了这样的训练。我们被训练成认为这是每个 web 应用的重要组成部分。习惯很难打破，尤其是那些已经产生积极结果的习惯。

软件开发可能会令人紧张和沮丧。一个典型的开发人员每天都要与无数的变量搏斗。看起来，没有什么问题是容易解决的。工具、过程或结果的一致性和可预测性是非常需要和罕见的。你能责怪 web 开发社区这么长时间依赖于像 jQuery 这样一致可靠的工具吗？

### 高雅

你听过有人说 DOM 很丑或者 JavaScript 有缺陷并且布满了定时炸弹吗？也许你自己也这样认为。虽然美在很大程度上是主观的，但这似乎是一个令人惊讶的普遍想法，尤其是在那些在 web 开发生涯后期继续使用 jQuery 的经验丰富的开发人员中。

原生浏览器 API 和 JavaScript 经常被认为不够优雅，这显然促使开发人员使用这个库。其思想是，没有 jQuery 的帮助，简单的问题很难解决。不相信我？问一些和你一起工作的开发人员。他们为什么使用 jQuery？期待听到创建优雅简洁的代码来应对常见问题是多么简单。正如本节前面所讨论的，API 本身是直观和优雅的。

但是 jQuery 的优雅不仅仅是一个可预测的 API。围绕 API 设计的可用性考虑进一步证明了这种优雅的说法。

以方法链接为例，它允许开发人员非常容易地将同一元素上的许多操作联系在一起，而没有重复或临时变量创建的负担。假设您想要选择一组元素，然后向所有元素添加一个类，最后向初始元素集的一个更具体的子集添加一个类。通过利用 jQuery API 提供的优雅的方法链，可以非常容易地完成所有这些工作。清单 [1-1](#Par23) 通过向包含“字母表”类的所有元素添加一类“下划线”来演示这一点。然后，它只选择包含一类“元音”的“alphabet”元素的子元素，最后用一类“bold”对它们进行注释，同时隐藏任何本身也包含一类“a”的“元音”元素的子元素:

```js
1  $('.alphabet').addClass('underline')
2     .find('.vowels').addClass('bold')
3        .find('.a').hide();
Listing 1-1.
jQuery method chaining

```

我发现许多开发人员倾向于纠结于 JavaScript 中的异步操作，比如 ajax 请求。发出这些请求并不困难，但是考虑到调用的异步性质，处理结果对一些人来说是令人沮丧的。jQuery 通过将响应处理函数与发送底层请求的函数调用完美地绑定在一起，稍微简化了这一点。清单 [1-2](#Par25) 发送一个检索用户名的请求，提供对服务器响应结果的简单访问。

```js
1  $.get('name/123', function(theName) {
2     console.log(theName);
3  });
Listing 1-2.jQuery GET request

```

Note

除非开发人员工具已打开，否则控制台对象在 Internet Explorer 9 和更低版本中不可用。此外，前面的示例不处理错误响应，只处理成功。

有了这些“美”，我们很容易忘记努力的其他属性，比如表现。在前面的例子中是否有潜在的效率地雷？是的，但是这些可能一开始很难识别。我将在后面的章节中详细讨论这一点。

### 害怕

jQuery 让一切变得更简单——web 开发很难。没有一些帮助，你无法开发一个可靠的 web 应用或库。如果没有 jQuery，很难保证你的应用在所有浏览器中都可以正常运行。web API 实现在不同的浏览器之间有很大的不同。反正你需要的所有好的插件都依赖于 jQuery。这些都是盲目依赖 jQuery 的常见借口，都是基于恐惧。由于对未知的恐惧，我们都依赖 jQuery。我们将 DOM 视为一个神秘且不可预测的黑匣子，布满了严重的错误。我们担心跨浏览器的实现差异。

jQuery 的创始人 John Resig 早在 2009 年就有一个著名的结论“DOM 一团糟”。 [<sup>3</sup>](#Fn3) 在 web 历史的那一刻，ie 6 和 7 几乎占据了浏览器市场的 60%。 [<sup>4</sup>](#Fn4) 考虑到这一点，很难反驳雷西格先生当时的说法。DOM 确实是一只可怕而多变的野兽，当时最流行的浏览器都有非常糟糕和有限的内置工具。如果我们把时间追溯到 2006 年 8 月，也就是 jQuery 创建和首次发布的时候，会怎么样呢？当时，Internet Explorer 的最新版本是版本 6。令人难以置信的是，IE6(及更老版本)占所有浏览器使用量的 83%。在这一点上，web API 非常不成熟，浏览器的稳定性远低于我们在当前时代的预期，而且当时的浏览器对标准的遵从也不一致。

除了不成熟的开发工具、不同的 web API 实现和不直观的 DOM 之外，浏览器肯定会有问题。与任何其他复杂的代码包类似，浏览器也不能幸免于错误。jQuery 在历史上承诺了广泛的浏览器漏洞解决方案。许多年来，在标准遵守和质量控制方面，网络似乎类似于蛮荒的西部。不难理解为什么一个旨在规范浏览器的库如此受欢迎。再也不用担心跨浏览器支持了。甚至不用担心跨浏览器测试。jQuery 将为您完成所有繁重的工作，因此您可以完全专注于开发有趣且有用的 web 应用和库。还是可以？虽然 jQuery 有望将您从浏览器中的所有问题和复杂性中解放出来，但现实却有所不同。

## 拐杖只是暂时的

JavaScript 库通常是有用的工具。它们有助于您构建一个有用且可靠的 web 应用，或者甚至是另一个库。它们节省你的时间和按键。它们充当你、你的代码和浏览器之间的缓冲，填补空白并规范行为。从另一个意义上来说，这些库可以起到拐杖的作用。他们帮助没有经验和没有受过教育的开发人员，实际上没有教给他们任何关于底层复杂性的东西。尽管这本书的基调有时可能会暗示不是这样，但像 jQuery 这样的库本质上并不坏。只有当你的学习没有超越图书馆时，它们才是限制性的。

jQuery 总是能节省你的时间吗？它总是让你的 web 开发体验变得更容易吗？与核心库或其插件相关的约定是直观的吗？它真的解决了你所有的问题吗，或者它也许制造了一些新的问题？您是否花时间思考过该库附带的语法和约定？有没有更好的解决方案，或者 jQuery 真的修补了开发人员经常陷入的所有可用性漏洞？大多数情况下，jQuery 的 API 赏心悦目，非常直观。当然，这并不总是正确的。图书馆中肯定有令人不愉快的部分。让我们举一个 jQuery 的优雅和必要性的例子。

jQuery 并不能完全保护你免受浏览器的困扰。这不是任何图书馆的现实目标。除此之外，jQuery 只是一个库，一个工具，一个助手。它并不意味着取代整个浏览器栈。有些问题甚至最好用 CSS 或静态 HTML 来解决。但是对于使用 jQuery 的开发人员来说，这是与浏览器交互的唯一方式。对于不知情的开发人员来说，使用 jQuery 的 API 编写最少的 HTML 并对标记进行任何调整都是完全合理的。或者，使用 jQuery 生成所有标记可能会更容易。您可以使用 jQuery 创建元素，然后轻松地将它们插入到页面中。

不在 CSS 文件中声明样式，倾向于使用`$(element).css('fontWeight', 'bold')`。虽然非常方便，但这是一种非常不可维护的生成内联样式的方法。对于新的开发人员来说，关注点分离的重要性可能不是很明显。jQuery 神奇的无所不包的 API 让我们很容易忽略可用的原生工具。当你盲目地依赖一个整体的抽象时，HTML、CSS 和 JavaScript 的适当角色并不总是在等式中出现。这个库不仅仅是一些人的工具，它是工具。它是 web 开发的全部和最终目标。您将会看到为什么这是一种危险的思路，尤其是对于专业的和有抱负的开发人员。

事实上，jQuery 是许多人的拐杖。它没有融合到浏览器中，只是作为一个补充。经验丰富、知识渊博的开发人员实际上可能更喜欢使用 jQuery，这当然没有错。但对其他人来说，它只是一个道具。那些刚接触 web 开发的人通常会拿起拐杖，蹒跚而行一段时间。但最终，拐杖从他们身下拔出，他们倒下了。

### 你是机械师，不是司机

关于堆栈溢出的一个流行问题是“在学习 jQuery 之前学习 JavaScript 是个好主意吗？”这个问题的一个特殊答案提供了一些奇怪的建议。这位投稿人在他的回答中继续说道“如果你打算使用一个像 jQuery 这样的框架，你真的不需要太专注于学习 HTML DOM 的细节。只需按照 jQuery 方式’做事，然后根据需要尽可能多地获取 HTML DOM。” [<sup>8</sup>](#Fn8) 尽管这种想法在回答这个问题的其他人(也许是更有经验的开发人员)中并不常见。我自己也曾是一名没有经验的 web 开发新手，还记得这种思路是如何被那些进入基于浏览器的前端编码的混乱世界的人所接受的。

在我写的题为“你不需要 jQuery”的一系列博客文章中， [<sup>9</sup>](#Fn9) 一位评论者提供了一个惊人的类比，概述了博客(和这本书)的目标之一。

“我试图指导我的同行的一件事是，你不能在浇注地基之前就在地基上竖起墙。事实上，你应该平整地面，铺设功能性管道(测试),然后在开始建造结构之前浇筑地基。这涉及到在为任何端点(浏览器)构建时理解你的工具的核心(HTML、CSS、JS)，[<sup>10</sup>](#Fn10)Lawrence Francell)。

换句话说，对于一个稳定、持久的应用或库，您必须很好地理解您的工具是如何工作的。达不到这一点，你就不是开发者。事实上，你是一个图书馆集成者。

很难反驳评论者的合理建议，但是 jQuery 惊人的魔力有时似乎会蒙蔽我们。这并不意味着我们是“糟糕的”开发者。事实上，这甚至可能不是我们的错。我们注定要走阻力最小的路。这实际上是一个经过充分研究和记录的心理学理论，被称为“最小努力原则”(来自乔治·金斯利·齐夫的《人类行为和最小努力原则》(Addison-Wesley Press，1949)。

唱反调，也许我们可以用另一个例子来反驳前面引用的类比。我们大多数人可能每天都在开车。但是我们中有多少人能够诊断出典型内燃机的问题呢？有多少人会做除了换轮胎以外的事情？这些问题的答案可能是“很少”

我们真的需要成为称职的汽车修理工才能开车吗？不，当然不是。对我们许多人来说，驾驶不是一种职业。相反，这是我们所依赖的一种便利。我们没有时间去了解汽车的每一个细节，也不应该去了解。汽车的存在是为了简化我们的生活，节省我们的时间。汽车制造商不希望他们的客户是汽车修理工。出于显而易见的原因，他们设计产品时考虑的是普通人，以确保尽可能多的人可以使用他们的汽车。

我们可以把开车比作开浏览器吗？作为软件开发人员，我们真的需要理解网络的基础吗？正如你在上面的堆栈溢出回答中看到的，有些人可能会说不。但重要的是要明白我们不是驱动程序。我们是机械师和设计师，不是用户。

### 矮化生长

当你在没有 jQuery 和拐杖的情况下被推进一个新项目时会发生什么？如果您的能力停留在库的 API 的边缘，您的选择是有限的。你在这种抽象中投入太多，危及你超越它的能力。你真的希望你所有的项目都依赖于一段代码吗？短期来看，这似乎不是问题。展望未来，这条道路的可行性变得值得怀疑。

总的来说，软件开发和技术的前景是不断变化的。作为开发人员，我们不仅理解这一点，而且欣然接受。这使得我们的工作既有挑战性又有趣。使用 jQuery 或任何其他库都没有问题。但是通过使用这些作为拐杖，我们不再是软件开发者。我们是 jQuery 程序员。

作为一名新的开发人员，您的目标不一定要围绕敏捷性。在这个早期阶段学习基础知识是至关重要的。随着你的项目和职业的发展，通过适应你的环境——浏览器——你将自己放在一个更好的位置来做出好的决定。只有在您牢固掌握了基础知识并更好地理解了 web 开发的最基本形式之后，您才应该专注于选择和学习一种工具来加速您的开发过程。

这个建议并不是专门针对软件开发的。你还记得你第一次学数学的时候吗？你完成的所有练习都可以用计算器轻松解决。最有可能的是，你被严格禁止使用计算器(我知道我是)。为什么呢？计算器更快更准确。简单来说，在这个阶段，目标不是速度。对数学基础的透彻理解是最重要的。一旦你理解了计算器是如何执行这些任务的，你就可以在将来解决更复杂的问题时选择使用或不使用它。理解基本原理可以确保你不会被工具束缚住。

当我们的选择库逐渐变得过时，或者被人从我们身边拿走，我们盲目的依赖会阻止我们前进。这种不幸情况的例子比比皆是。在 JavaWorld 最近的一篇文章中，作者引用了“你应该使用 jQuery 的 6 个理由”原因是值得怀疑的，因为作者显然对浏览器栈缺乏基本的理解。这一点在诸如“jQuery 是 HTML5 的主要组成部分”这样的说法中尤其明显，它将 JavaScript 与文档标记规范混为一谈。这篇文章中另一个令人不安的引用是:“jQuery 页面加载速度更快。”作为开发人员，正是这种过度简化导致我们认为工作的复杂性是理所当然的。假装一个库就能驯服像浏览器这样的野兽，只会让我们陷入一场最终会失败的令人沮丧的斗争。

## 捷径的代价(真实故事)

接下来是一个真实的故事，一个真正的 web 开发人员走了真正的捷径(真的)。他只关注短期，关注让他的工作更容易。他主要关心的是取悦项目经理。学习基础知识对他来说是浪费时间。他的目标是尽可能快地写出代码并完成一长串功能。那个开发者就是我。

jQuery 让一切变得更简单。没有它，你无法开发一个可靠的 web 应用。如果没有 jQuery，很难保证你的应用在所有浏览器中都可以正常运行。不同浏览器之间的 DOM API 实现差别很大。反正你需要的所有好的插件都依赖于 jQuery。我相信所有这些借口，甚至更多。有些甚至一度是很好的借口。

### 一个新的方向，一个新的网络开发者

回到我 web 开发生涯的早期，我正从专门的服务器端工作转型过来。我被分配到 Jennings，一个基于网络的记者制作工具。我没有专业的 HTML、CSS 或 JavaScript 经验。退一步说，我缺乏前端技能。

团队中没有人对 web 开发感到满意。我们都是菜鸟，以前的后端开发人员徒劳地努力在这个新的环境中理解我们的知识。期限是严格的，目标是崇高的。看起来我们都需要一些帮助——也许是一种让我们的工作变得轻松一点的工具。没有时间学习。我们要写一个应用！

### 捷径和我自己发育不良的成长

我第一次接触 JavaScript 和 web 是通过 jQuery。事实上，我甚至懒得学习适当的 JavaScript。我不知道 web API 是什么样子，也不知道如何直接处理 DOM。jQuery 为我做了一切。当我后来在没有 jQuery 拐杖的情况下完成一个项目时，我知识上的这一巨大差距赶上了我。我被迫学习适当的 web 开发，并且我从未回头。

在 Jennings 之后，jQuery 是所有未来项目中的一个需求(对我来说)。这是必须的，因为我不知道任何其他方法来驯服浏览器。这在当时似乎并不罕见。事实上，它不是。在大多数应用和库中，jQuery 是一个预期的依赖项。我盲目的信仰并不是一个明显的障碍。

在某种程度上，当我搜索插件来解决项目中的常见问题时，这种盲目依赖的一些问题变得很明显。jQuery 本身是一个有用的库，但是它只解决核心的、底层的问题。如果你想支持更高级的特性，比如模态对话框，你需要自己写或者找一个已经解决了问题的插件。

自然，我专门寻找 jQuery 插件来填补项目中的漏洞。事实上，我回避任何不依赖于它的东西。我不相信任何不使用这个神奇盒子的插件。jQuery 解决了我所有的问题，让我跨浏览器开发变得很容易。我为什么要相信一个没有达到同样启蒙水平的开发人员的工作呢？

过了一会儿，很明显这些 jQuery 插件的质量低得惊人。现实是，jQuery 的低准入门槛是一把双刃剑。有时候很容易快速写出有用的东西。但是更容易的是快速编写不可维护的容易出错的代码！我发现很多插件都写得很差。我对 web 开发的新手知识使我很难整理和解决我在使用这些 jQuery 插件库时遇到的问题。挫败感袭来，我作为开发人员的基础开始出现裂缝。

但是写得很差的库中的错误和低效仅仅暴露了冰山一角。这些插件甚至 jQuery 核心中的抽象漏洞泛滥，我几乎无法理解。为什么我不能用 jQuery 触发在 jQuery 之外创建的自定义事件处理程序？jQuery 支持定制事件，为什么不能呢？这是我在从事一个既依赖 jQuery 又依赖 Prototype 的项目时遇到的一个具体问题，Prototype 是一个具有类似目标的替代 JavaScript web 框架。我天真地认为我可以使用 jQuery 轻松地触发与 Prototype 绑定的自定义事件处理程序——没那么幸运。

再以文件上传为例。有人会认为使用 jQuery 上传文件就像在请求中包含文件作为`data`一样简单。并非如此。如果这样做，jQuery 将尝试对文件进行 URL 编码。在令人沮丧的大量阅读和实验之后，我了解到必须将两个模糊的属性设置为`false`,以确保 jQuery 不会在请求发送之前试图修改文件。

开发人员盲目依赖这个库时还会遇到另一个问题:使用 jQuery 在旧浏览器中发送跨域请求是不直观的。当使用一个旨在消除 web API 差异并允许轻松管理旧浏览器的库时，这是一个令人惊讶的认识。我将在第 9 章中讨论所有这些以及更多内容。

jQuery 的属性处理实用函数在这个库的生命周期中发生了巨大的变化。让我们考虑一个常见的任务作为例子:确定复选框的状态。在早期版本的 jQuery 中，通过 jQuery 的正确方法是使用`attr()`方法。如果复选框被选中，对`$(checkboxEl).attr('checked')`的简单调用将返回`true`。否则，它将返回`false`。对于一个经验丰富的 JavaScript 开发人员来说，这本身就是一个奇怪的行为，但是我们将把这些细节留到第五章[中。](05.html)

对于专注于 jQuery 的开发人员来说，jQuery API 的这一部分变得更加糟糕。在 jQuery 的更高版本中，相同的调用将返回 checkbox 元素的`checked`属性的值(该值不会随着复选框的选中和取消选中而自然改变)。虽然这实际上是正确的行为，因为它正确地反映了元素的实际属性，但在重大更改后，我感到很困惑。由于对 jQuery 的过度依赖，我没有很好地掌握 HTML。我不明白为什么我后来不得不依赖 jQuery 的`prop()`方法来获取复选框的当前状态，尽管旧的行为或`attr()`方法在技术上是不正确的。

我掉进了一个陷阱，这是许多新的、偶然的和业余的 web 开发人员都会掉进的陷阱。如果我先花时间理解 JavaScript 和浏览器提供的 API，我会省去很多麻烦。事情的正确顺序是这样的:

1.  学习 JavaScript。
2.  学习浏览器的 API。
3.  学习 jQuery(或任何其他跨项目可能需要的框架/库)。

许多人从第三点开始，把第一点和第二点推迟到更晚的时间(或者永远不要)。如果您不理解 jQuery 实际上为您做了什么，那么随着泄漏的抽象从木制品中出来，将会有许多令人沮丧的日子。如果你想有效地成长为一名 web 开发人员，这是一个你必须避免的陷阱——这个陷阱阻碍我作为 web 开发人员的职业生涯的时间比我希望的要长。

### 挑战:不允许 jQuery！

2012 年初，我开始更换 Widen Collective 中的 Java 小程序上传器， [<sup>12</sup>](#Fn12) Widen 的旗舰数字资产管理 SaaS 产品。在浏览器中处理 Java 变成了一场噩梦，我们渴望迁移到原生的 JavaScript/HTML 解决方案。我首先研究了 jQuery 文件上传(当时最流行的上传库， [<sup>13</sup>](#Fn13) )，但是由于启动和运行它需要大量的依赖项，以及缺乏内聚的文档，所以被推迟了。因此，在我的 web 开发生涯中，我第一次选择了一个非 jQuery 解决方案，一开始我有点迷茫。

我决定用这个库来替换我们的 Java applet uploader，这个库当时叫做 valums/file- uploader(由于它在 GitHub 上的位置)。它是独一无二的，因为它是完全独立的。起初我有点怀疑，因为我被训练对 jQuery 生态系统抱有很大的信心，但我对能够轻松集成插件感到惊喜。

然而，插件已经年久失修。它不再被积极维护，需要解决一些错误和调整功能，以使其为 Widen Collective 的生产做好准备。尽管所需的工作并不多，但由于我在 JavaScript、HTML 和 CSS 知识方面的巨大差距，我花了大量时间来解决这些问题。我将我的一些更改推回到一个分叉的 GitHub 存储库中。我的代码是草率的和有缺陷的，但是它是足够的。 [<sup>14</sup>](#Fn14)

我的努力显然被图书馆的创建者 Andrew Valums 注意到了，他问我是否有兴趣维护这个图书馆。尽管我在 jQuery 之外没有什么实践经验，但我抓住了这个机会并接受了。我现在是一个大型且非常流行的非 jQuery 插件的唯一维护者，该插件将被重新命名为 Fine Uploader。

当我在 2012 年年中接管大型跨浏览器文件上传库 Fine Uploader 的维护和开发时，我的第一反应是使用 jQuery 全部重写，因为那会让我的生活更轻松(我以为)。现有的用户社区非常反对将任何第三方依赖带入库中，所以我被迫使用原生 web API 和普通 JavaScript。 [<sup>十五</sup>](#Fn15)

最初，我的经验不足无疑减缓了 Fine Uploader 的发展。我被迫获得对核心概念的专家级理解。我编写了自己的小垫片来解释 web API 和 JavaScript 的跨浏览器差异。我花了大量时间阅读和实验。随着时间的推移，我成功地摆脱了对 jQuery 压迫性魔力的盲目依赖。我不需要 jQuery，你也不需要。

## 专注于实现，而不是魔术

jQuery 的魔力及其简化 web 应用开发的承诺非常诱人。但是我们已经讨论了如何以及为什么您可以通过首先了解您的环境而成为一名更强的开发人员。通过遵循正确的路线来学习你的交易:首先是 JavaScript、HTML、CSS 和 web API。以后再担心图书馆。

让我坦白地告诉你，对于一个以前一无所知的新手网站开发者来说，现在扮演一个聪明的“我什么都见过”的开发者，这确实是既有趣又超现实的。但是我可以非常自信地说，如果您更熟悉 web 开发的基础知识，那么您就可以更好地决定何时需要使用 jQuery，何时不需要。知识和经验给了你做出这个选择的自由，并用事实来证明它。你不会永久附属于任何图书馆。你有选择。

不要躲在工具后面——拥有自己的代码。成为 web 开发人员和教师，而不是 jQuery 开发人员和图书馆用户。说“我不再需要 jQuery 了”是一种解放。我自己能行！”而且是真心实意的。不要养成走捷径的习惯。开始走上一条你作为专业人士可以引以为豪的轨迹。不要把学习基础知识推迟到以后，因为以后永远不会发生。避免当你选择的库无法保护你免受浏览器攻击时的无助感。你不可能现实地期望在你的整个职业生涯中躲在抽象层的后面。基本面是推动你前进的基石，让你掌握自己的交易。

Footnotes [1](#Fn1_source)

[T2`https://w3techs.com/technologies/history_overview/javascript_library/all/y`](https://w3techs.com/technologies/history_overview/javascript_library/all/y)

  [2](#Fn2_source)

[T2`http://w3techs.com/technologies/history_overview/javascript_library/all/y`](http://w3techs.com/technologies/history_overview/javascript_library/all/y)

  [3](#Fn3_source)

[T2`http://ejohn.org/blog/the-dom-is-a-mess/`](http://ejohn.org/blog/the-dom-is-a-mess/)

  [4](#Fn4_source)

[T2`www.w3counter.com/globalstats.php?year=2009&month=1`](http://www.w3counter.com/globalstats.php?year=2009%26month=1)

  [5](#Fn5_source)

[T2`www.onestat.com/html/aboutus_pressbox44-mozilla-firefox-has-slightly-increased.html`](http://www.onestat.com/html/aboutus_pressbox44-mozilla-firefox-has-slightly-increased.html)

  [6](#Fn6_source)

[T2`https://docs.google.com/document/d/1LPaPA30bLUB_publLIMF0RlhdnPx_ePXm7oW02iiT6o/preview?sle=true#heading=h.fumxprdxo2gn`](https://docs.google.com/document/d/1LPaPA30bLUB_publLIMF0RlhdnPx_ePXm7oW02iiT6o/preview?sle=true#heading=h.fumxprdxo2gn)

  [7](#Fn7_source)

[T2`http://stackoverflow.com/questions/668642/is-it-a-good-idea-to-learn-javascript-before-learning-jquery`](http://stackoverflow.com/questions/668642/is-it-a-good-idea-to-learn-javascript-before-learning-jquery)

  [8](#Fn8_source)

[T2`http://stackoverflow.com/a/841292/486979`](http://stackoverflow.com/a/841292/486979)

  [9](#Fn9_source)

[T2`http://blog.garstasio.com/you-dont-need-jquery/`](http://blog.garstasio.com/you-dont-need-jquery/)

  [10](#Fn10_source)

[T2`http://blog.garstasio.com/you-dont-need-jquery/why-not/#comment-1799026169`](http://blog.garstasio.com/you-dont-need-jquery/why-not/#comment-1799026169)

  [11](#Fn11_source)

[T2`www.javaworld.com/article/2078613/java-web-development/6-reasons-you-should-be-using-jquery.html`](http://www.javaworld.com/article/2078613/java-web-development/6-reasons-you-should-be-using-jquery.html)

  [12](#Fn12_source)

[T2`www.widen.com/digital-asset-management-software/`](http://www.widen.com/digital-asset-management-software/)

  [13](#Fn13_source)

[T2`https://github.com/blueimp/jQuery-File-Upload`](https://github.com/blueimp/jQuery-File-Upload)

  [14](#Fn14_source)

`https://github.com/FineUploader/fine-uploader/compare/82c8d5b0c383738ed84c771e90dbf202bd3acd68…55b3ca6e9f7a18fd3adc5ba7537124ae12b63e71`

  [15](#Fn15_source)

[T2`https://github.com/FineUploader/fine-uploader/issues/326`](https://github.com/FineUploader/fine-uploader/issues/326)